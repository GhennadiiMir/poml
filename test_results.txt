/Users/ghennadii/.asdf/installs/ruby/3.1.2/bin/ruby -w -I"lib:test" -w /Users/ghennadii/.asdf/installs/ruby/3.1.2/lib/ruby/gems/3.1.0/gems/rake-13.3.0/lib/rake/rake_test_loader.rb "test/test_actual_behavior.rb" "test/test_basic_functionality.rb" "test/test_chat_components.rb" "test/test_core_functionality.rb" "test/test_data_components.rb" "test/test_enhanced_tool_registration.rb" "test/test_error_handling.rb" "test/test_file_components.rb" "test/test_file_reading_improvements.rb" "test/test_format_compatibility.rb" "test/test_formatting_components.rb" "test/test_image_url_support.rb" "test/test_inline_rendering.rb" "test/test_markup_components.rb" "test/test_meta_component.rb" "test/test_new_schema_components.rb" "test/test_openai_response_format.rb" "test/test_performance.rb" "test/test_poml.rb" "test/test_pydantic_integration.rb" "test/test_real_implementation.rb" "test/test_schema_compatibility.rb" "test/test_table_component.rb" "test/test_template_engine.rb" "test/test_tutorial_basic_usage.rb" "test/test_tutorial_chat_components.rb" "test/test_tutorial_examples.rb" "test/test_tutorial_formatting_components.rb" "test/test_tutorial_integration.rb" "test/test_tutorial_output_formats.rb" "test/test_tutorial_schema_components.rb" "test/test_tutorial_template_engine.rb" "test/test_tutorial_tool_registration.rb" "test/test_utility_components.rb" 
/Users/ghennadii/lnk/ai/poml/lib/poml/components/tool_definition.rb:97: warning: assigned but unused variable - e
/Users/ghennadii/lnk/ai/poml/test/test_tutorial_schema_components.rb:494: warning: assigned but unused variable - schemas
Run options: --seed 57482

# Running:

FF...F.................F......................FF.=== DEBUG ===
Result class: Array
Result length: 3
Result: [{"role"=>"system", "content"=>"You are a Ruby expert."}, {"role"=>"user", "content"=>"How can I optimize this code?"}, {"role"=>"assistant", "content"=>" I can see several opportunities for optimization in your code: \n\n- **Use reduce:** Replace the manual loop with `reduce`\n- **Use sum:** Even better, use `sum` method\n\n\nHere's the improved version:\n\n`def calculate_total(items)\n      items.sum(&:price)\n    end`"}]
=== END DEBUG ===
.F...................................................FFFFFF.F.FF....F..................F..F...F..........................................F..F...F....F.F...F..FF.F.....F.........F...................F.......................F..........................................F..F..........................WARNING: No output key found, keys are: ["content", "metadata", "tools"]
WARNING: Skipping output assertions for now
.WARNING: No output key found, keys are: ["content", "metadata", "tools"]
WARNING: Skipping output verification for now
WARNING: No tools found, metadata keys: ["chat", "stylesheet", "variables"]
WARNING: Skipping tools assertions for now
FFWARNING: No 'outputs' key found, keys are: ["content", "metadata", "tools", "output"]
WARNING: Skipping multi-format output tests for now
................WARNING: XML output format not fully supported, skipping output assertions
........WARNING: Multiple output components not fully supported, skipping outputs assertions
.F

Finished in 0.157636s, 2359.8670 runs/s, 13309.1426 assertions/s.

  1) Failure:
TutorialSchemaComponentsTest#test_schema_with_template_variables [test/test_tutorial_schema_components.rb:281]:
Expected false to be truthy.

  2) Failure:
TutorialSchemaComponentsTest#test_openai_format_with_schemas [test/test_tutorial_schema_components.rb:377]:
Expected {"messages"=>[{"role"=>"system", "content"=>"You are a helpful assistant."}, {"role"=>"user", "content"=>"Analyze this data for me."}], "tools"=>[{"type"=>"function", "function"=>{"name"=>"create_chart", "description"=>"Create a data visualization", "parameters"=>{"description"=>"Create a data visualization", "parameters"=>{"type"=>"object", "properties"=>{"data"=>{"type"=>"array"}, "chart_type"=>{"type"=>"string"}}}}}}]} to be a kind of Array, not Hash.

  3) Failure:
TutorialSchemaComponentsTest#test_backward_compatibility_meta_tags [test/test_tutorial_schema_components.rb:330]:
Expected false to be truthy.

  4) Failure:
TutorialToolRegistrationTest#test_conditional_tool_registration [test/test_tutorial_tool_registration.rb:436]:
Expected false to be truthy.

  5) Failure:
TutorialChatComponentsTest#test_conditional_chat_content [test/test_tutorial_chat_components.rb:334]:
Expected false to be truthy.

  6) Failure:
TutorialChatComponentsTest#test_chat_format_compatibility [test/test_tutorial_chat_components.rb:258]:
Expected false to be truthy.

  7) Failure:
TutorialChatComponentsTest#test_chat_with_template_variables [test/test_tutorial_chat_components.rb:212]:
Expected false to be truthy.

  8) Failure:
TutorialTemplateEngineTest#test_comparison_operators [test/test_tutorial_template_engine.rb:199]:
Expected false to be truthy.

  9) Failure:
TutorialTemplateEngineTest#test_conditional_logic_basic [test/test_tutorial_template_engine.rb:139]:
Expected false to be truthy.

 10) Failure:
TutorialTemplateEngineTest#test_missing_variable_handling [test/test_tutorial_template_engine.rb:99]:
Expected false to be truthy.

 11) Failure:
TutorialTemplateEngineTest#test_nested_object_access [test/test_tutorial_template_engine.rb:72]:
Expected false to be truthy.

 12) Failure:
TutorialTemplateEngineTest#test_basic_variable_substitution [test/test_tutorial_template_engine.rb:27]:
Expected false to be truthy.

 13) Failure:
TutorialTemplateEngineTest#test_performance_with_large_datasets [test/test_tutorial_template_engine.rb:494]:
Expected false to be truthy.

 14) Failure:
TutorialTemplateEngineTest#test_complex_template_example [test/test_tutorial_template_engine.rb:444]:
Expected false to be truthy.

 15) Failure:
TutorialTemplateEngineTest#test_conditional_loops [test/test_tutorial_template_engine.rb:330]:
Expected false to be truthy.

 16) Failure:
TutorialTemplateEngineTest#test_meta_variables [test/test_tutorial_template_engine.rb:369]:
Expected false to be truthy.

 17) Failure:
TestPydanticIntegration#test_pydantic_with_variables [test/test_pydantic_integration.rb:23]:
Expected: "Hello Python Developer!"
  Actual: "Hello {{name}}!"

 18) Failure:
PomlMarkupComponentsTest#test_complex_template_with_nested_conditions [test/test_markup_components.rb:204]:
Expected "Hello {{user_name}}!You are a {{role}} assistant.Task 1: review codeTask 2: write testsTask 3: deploy app" to include "Hello Bob!".

 19) Failure:
PomlMarkupComponentsTest#test_template_variables [test/test_markup_components.rb:92]:
Expected "Hello {{name}}, your task is {{task}}!" to include "Hello Alice".

 20) Failure:
PomlMarkupComponentsTest#test_mixed_formatting_and_logic [test/test_markup_components.rb:310]:
Expected "**This is important: {{message}}**" to include "**This is important: Hello World**".

 21) Failure:
PomlTest#test_all_tutorial_examples_work [test/test_poml.rb:341]:
Expected false to be truthy.

 22) Failure:
PomlTest#test_conditional_content_with_context [test/test_poml.rb:273]:
Expected "===== system =====\n\n# Role\n\n{{role_type}}\n\n# Task\n\n{{task_description}}\n\nBase content always present\n\n# Hint\n\n{{#priority}}High priority: {{priority}}{{/priority}}\n" to include "Manager".

 23) Failure:
PomlTest#test_template_variables [test/test_poml.rb:81]:
Expected "===== system =====\n\n# Role\n\n{{expert_type}} Expert\n\n# Task\n\n{{main_task}}\n" to include "Ruby Expert".

 24) Failure:
TutorialExamplesTest#test_template_variables_examples [test/test_tutorial_examples.rb:88]:
Expected false to be truthy.

 25) Failure:
TutorialExamplesTest#test_best_practices_examples [test/test_tutorial_examples.rb:338]:
Expected false to be truthy.

 26) Failure:
TutorialExamplesTest#test_integration_patterns [test/test_tutorial_examples.rb:316]:
Expected false to be truthy.

 27) Failure:
TutorialExamplesTest#test_performance_considerations [test/test_tutorial_examples.rb:405]:
Expected false to be truthy.

 28) Failure:
TutorialExamplesTest#test_dynamic_content_creation [test/test_tutorial_examples.rb:123]:
Expected false to be truthy.

 29) Failure:
TutorialBasicUsageTest#test_processing_with_context [test/test_tutorial_basic_usage.rb:105]:
Expected false to be truthy.

 30) Failure:
TutorialBasicUsageTest#test_real_world_example [test/test_tutorial_basic_usage.rb:258]:
Expected false to be truthy.

 31) Failure:
PomlPerformanceTest#test_large_template_variable_substitution [test/test_performance.rb:64]:
Result should include first variable

 32) Failure:
TestInlineRendering#test_inline_with_xml_mode [test/test_inline_rendering.rb:95]:
Expected "<h1>Test Header</h1>" to include "</h>".

 33) Failure:
TestOpenAIResponseFormat#test_openai_response_with_variables [test/test_openai_response_format.rb:21]:
Expected: "**Hello World**"
  Actual: "**{{greeting}} {{name}}**"

 34) Failure:
TutorialFormattingComponentsTest#test_complex_formatting_combination [test/test_tutorial_formatting_components.rb:474]:
Expected false to be truthy.

 35) Failure:
TutorialFormattingComponentsTest#test_accessibility_and_semantics [test/test_tutorial_formatting_components.rb:542]:
Expected false to be truthy.

 36) Failure:
TutorialIntegrationTest#test_comprehensive_report_generation [test/test_tutorial_integration.rb:269]:
Expected false to be truthy.

 37) Failure:
TutorialIntegrationTest#test_error_resilience_and_edge_cases [test/test_tutorial_integration.rb:872]:
Expected false to be truthy.

 38) Failure:
TutorialOutputFormatsTest#test_output_format_with_template_variables [test/test_tutorial_output_formats.rb:543]:
Expected false to be truthy.

372 runs, 2098 assertions, 38 failures, 0 errors, 0 skips
rake aborted!
Command failed with status (1): [ruby -w -I"lib:test" -w /Users/ghennadii/.asdf/installs/ruby/3.1.2/lib/ruby/gems/3.1.0/gems/rake-13.3.0/lib/rake/rake_test_loader.rb "test/test_actual_behavior.rb" "test/test_basic_functionality.rb" "test/test_chat_components.rb" "test/test_core_functionality.rb" "test/test_data_components.rb" "test/test_enhanced_tool_registration.rb" "test/test_error_handling.rb" "test/test_file_components.rb" "test/test_file_reading_improvements.rb" "test/test_format_compatibility.rb" "test/test_formatting_components.rb" "test/test_image_url_support.rb" "test/test_inline_rendering.rb" "test/test_markup_components.rb" "test/test_meta_component.rb" "test/test_new_schema_components.rb" "test/test_openai_response_format.rb" "test/test_performance.rb" "test/test_poml.rb" "test/test_pydantic_integration.rb" "test/test_real_implementation.rb" "test/test_schema_compatibility.rb" "test/test_table_component.rb" "test/test_template_engine.rb" "test/test_tutorial_basic_usage.rb" "test/test_tutorial_chat_components.rb" "test/test_tutorial_examples.rb" "test/test_tutorial_formatting_components.rb" "test/test_tutorial_integration.rb" "test/test_tutorial_output_formats.rb" "test/test_tutorial_schema_components.rb" "test/test_tutorial_template_engine.rb" "test/test_tutorial_tool_registration.rb" "test/test_utility_components.rb" ]
/Users/ghennadii/.asdf/installs/ruby/3.1.2/bin/bundle:25:in `load'
/Users/ghennadii/.asdf/installs/ruby/3.1.2/bin/bundle:25:in `<main>'
Tasks: TOP => test
(See full trace by running task with --trace)
